{"ast":null,"code":"import _toConsumableArray from\"/Users/akhand/Developer/power-search/quickstart-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/akhand/Developer/power-search/quickstart-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/akhand/Developer/power-search/quickstart-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/akhand/Developer/power-search/quickstart-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{Tag,Empty,Button,Row,Col,Result,Divider,Card,Avatar,Image}from'antd';import{DoubleRightOutlined,CompassTwoTone,DeleteOutlined,SearchOutlined}from'@ant-design/icons';import mondaySdk from\"monday-sdk-js\";import logo from'./../logo.png';import logo_small from'./../logo_small.png';var Meta=Card.Meta;var monday=mondaySdk();var OptionSelection=function OptionSelection(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isSaved=_useState2[0],setIsSaved=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),savedSearches=_useState4[0],setSavedSearches=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),isMounted=_useState6[0],setIsMounted=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isDataLoading=_useState8[0],setIsDataLoading=_useState8[1];useEffect(function(){setIsMounted(true);},[]);function loadSavedItems(){return _loadSavedItems.apply(this,arguments);}function _loadSavedItems(){_loadSavedItems=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var resp,saved;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return monday.storage.instance.getItem('boop');case 2:resp=_context2.sent;if(!(!resp||!resp.data)){_context2.next=7;break;}return _context2.abrupt(\"return\");case 7:if(resp.data.value!==null){saved=resp.data.value;setSavedSearches(JSON.parse(saved));}case 8:case\"end\":return _context2.stop();}}},_callee2);}));return _loadSavedItems.apply(this,arguments);}function deleteSavedItem(_x){return _deleteSavedItem.apply(this,arguments);}function _deleteSavedItem(){_deleteSavedItem=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(idx){var saved,resp;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:// console.log(e.value)\nsaved=_toConsumableArray(savedSearches);// console.log(idx)\nsaved.splice(idx,1);_context3.next=4;return monday.storage.instance.setItem('boop',JSON.stringify(saved));case 4:resp=_context3.sent;setSavedSearches(saved);// console.log(savedSearches)\nif(saved.length===0){setIsSaved(false);}case 7:case\"end\":return _context3.stop();}}},_callee3);}));return _deleteSavedItem.apply(this,arguments);}useEffect(function(){if(isMounted){// console.log(savedSearches)\nif(savedSearches.length===0){setIsSaved(false);}else{setIsSaved(true);}}},[savedSearches]);useEffect(function(){if(isMounted){// console.log(isSaved)\n}},[isSaved]);useEffect(function(){if(isMounted){// console.log(savedSearches)\n// Do nothing\nsetIsDataLoading(true);// Fetch previously saved data\nloadSavedItems();// console.log(savedSearches)\nsetIsDataLoading(false);}},[isMounted]);useEffect(function(){if(isMounted){// console.log(savedSearches)\n// Do nothing\n}},[isDataLoading]);return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"site-statistic-demo-card\"},/*#__PURE__*/React.createElement(Row,{gutter:16},/*#__PURE__*/React.createElement(Col,{flex:\"auto\"},/*#__PURE__*/React.createElement(Result// icon={<SearchOutlined style={{ color: '#1c1f3b' }} />}\n,{icon:/*#__PURE__*/React.createElement(Image,{style:{width:\"200px\"},src:logo_small}),title:\"Let's begin with Super Search\",subTitle:\"or you can choose to run a search from the past...\",extra:[/*#__PURE__*/ // <Link to=\"/search\" key=\"0\">\nReact.createElement(Link,{to:{pathname:'/search',state:{question:\"\",searchType:\"\",searchGroups:[\"All Groups\"],searchColumns:[\"All Columns\"]}},key:\"0\"},/*#__PURE__*/React.createElement(Button,{type:\"primary\",key:\"console\",size:\"large\"},\"Go to Super Search\")),/*#__PURE__*/React.createElement(Link,{to:\"/view/history\",key:\"2\"},/*#__PURE__*/React.createElement(Button,{key:\"history\",size:\"large\"},\"View Search History\"))]}))),/*#__PURE__*/React.createElement(Row,{gutter:16,justify:\"center\"},/*#__PURE__*/React.createElement(Col,{flex:\"auto\"},/*#__PURE__*/React.createElement(Divider,{orientation:\"left\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Saved Searches\")),isSaved?/*#__PURE__*/React.createElement(Row,{gutter:16},savedSearches.map(function(item,idx){return/*#__PURE__*/React.createElement(Col,{span:6},/*#__PURE__*/React.createElement(Card,{actions:[/*#__PURE__*/ // <PlayCircleTwoTone />,\nReact.createElement(Link,{to:{pathname:'/search',state:{question:item.query,searchType:item.type,searchGroups:item.groups,searchColumns:item.columns}}},/*#__PURE__*/React.createElement(Button,{type:\"link\",icon:/*#__PURE__*/React.createElement(DoubleRightOutlined,null)})),/*#__PURE__*/React.createElement(Button,{type:\"link\",icon:/*#__PURE__*/React.createElement(DeleteOutlined,null),onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return deleteSavedItem();case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}}},_callee);})),value:idx})]},/*#__PURE__*/React.createElement(Meta,{avatar:/*#__PURE__*/React.createElement(Avatar,{style:{backgroundColor:\"#eb4034\"},icon:/*#__PURE__*/React.createElement(CompassTwoTone,{twoToneColor:\"#eb4034\"})}),title:item.query,description:/*#__PURE__*/React.createElement(\"div\",null,item.groups.map(function(item){return/*#__PURE__*/React.createElement(Tag,{color:\"blue\"},item);}),item.columns.map(function(item){return/*#__PURE__*/React.createElement(Tag,{color:\"green\"},item);}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Tag,{color:\"red\"},item.type))})));})):/*#__PURE__*/React.createElement(Row,{gutter:[16,24]},/*#__PURE__*/React.createElement(Col,{flex:\"auto\"},/*#__PURE__*/React.createElement(Empty,{description:/*#__PURE__*/React.createElement(\"span\",null,\"Saved searches appear here...\")})))))));};export default OptionSelection;","map":{"version":3,"sources":["/Users/akhand/Developer/power-search/quickstart-react/src/views/OptionSelection.js"],"names":["React","useState","useEffect","Link","Tag","Empty","Button","Row","Col","Result","Divider","Card","Avatar","Image","DoubleRightOutlined","CompassTwoTone","DeleteOutlined","SearchOutlined","mondaySdk","logo","logo_small","Meta","monday","OptionSelection","isSaved","setIsSaved","savedSearches","setSavedSearches","isMounted","setIsMounted","isDataLoading","setIsDataLoading","loadSavedItems","storage","instance","getItem","resp","data","value","saved","JSON","parse","deleteSavedItem","idx","splice","setItem","stringify","length","width","pathname","state","question","searchType","searchGroups","searchColumns","map","item","query","type","groups","columns","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Tag, Empty, Button, Row, Col, Result, Divider, Card, Avatar, Image } from 'antd';\nimport { DoubleRightOutlined, CompassTwoTone, DeleteOutlined, SearchOutlined } from '@ant-design/icons';\nimport mondaySdk from \"monday-sdk-js\";\nimport logo from './../logo.png'\nimport logo_small from './../logo_small.png'\nconst { Meta } = Card;\n\nconst monday = mondaySdk();\n\nconst OptionSelection = () => {\n\n    const [isSaved, setIsSaved] = useState(false)\n    const [savedSearches, setSavedSearches] = useState([])\n    const [isMounted, setIsMounted] = useState([])\n    const [isDataLoading, setIsDataLoading] = useState(false)\n\n    useEffect(() => {\n        setIsMounted(true)\n    }, [])\n\n    async function loadSavedItems(){\n        let resp = await monday.storage.instance.getItem('boop')\n        if(!resp || !resp.data){\n            return\n        } else {\n            if(resp.data.value !== null){\n                let saved = resp.data.value;\n                setSavedSearches(JSON.parse(saved))\n            }\n        }\n    }\n\n    async function deleteSavedItem(idx){\n        // console.log(e.value)\n        let saved = [...savedSearches]\n        // console.log(idx)\n        saved.splice(idx, 1)\n        let resp = await monday.storage.instance.setItem('boop', JSON.stringify( saved ))\n        setSavedSearches(saved)\n        // console.log(savedSearches)\n        if(saved.length === 0){\n            setIsSaved(false)\n        }\n    }\n\n    useEffect(() => {\n        if(isMounted){\n            // console.log(savedSearches)\n            if(savedSearches.length === 0){\n                setIsSaved(false)\n            } else {\n                setIsSaved(true)\n            }\n        }\n    }, [savedSearches])\n\n    useEffect(() => {\n        if(isMounted){\n            // console.log(isSaved)\n        }\n    }, [isSaved])\n\n    useEffect(() => {\n        if(isMounted){\n            // console.log(savedSearches)\n            // Do nothing\n            setIsDataLoading(true)\n            // Fetch previously saved data\n            loadSavedItems()\n            // console.log(savedSearches)\n            setIsDataLoading(false)\n        }\n    }, [isMounted])\n\n    useEffect(() => {\n        if(isMounted){\n            // console.log(savedSearches)\n            // Do nothing\n        }\n    }, [isDataLoading])\n\n\n    return (\n        <div className=\"container\">\n            <div className=\"site-statistic-demo-card\">\n                <Row gutter={16}>\n                    <Col flex=\"auto\">\n                        <Result\n                            // icon={<SearchOutlined style={{ color: '#1c1f3b' }} />}\n                            icon={<Image style={{width: \"200px\"}} src={logo_small}></Image>}\n                            title=\"Let's begin with Super Search\"\n                            subTitle=\"or you can choose to run a search from the past...\"\n                            extra={[\n                            // <Link to=\"/search\" key=\"0\">\n                                <Link to={{\n                                    pathname: '/search',\n                                    state: {\n                                        question: \"\",\n                                        searchType: \"\",\n                                        searchGroups: [\"All Groups\"],\n                                        searchColumns: [\"All Columns\"]\n                                    }\n                                    }} key=\"0\">\n                                <Button type=\"primary\" key=\"console\" size=\"large\">Go to Super Search</Button>\n                            </Link>,\n                            <Link to=\"/view/history\" key=\"2\">\n                                <Button key=\"history\" size=\"large\">View Search History</Button>\n                            </Link>,\n                            ]}\n                        />\n                    </Col>\n                </Row>\n                <Row gutter={16} justify=\"center\">\n                    <Col flex=\"auto\">\n                    <Divider orientation=\"left\">\n                        <h3>Saved Searches</h3>\n                    </Divider>\n                    {isSaved ? \n                        <Row gutter={16}>\n                            {savedSearches.map((item, idx) => (\n                            <Col span={6}>\n                            <Card\n                                actions={[\n                                // <PlayCircleTwoTone />,\n                                <Link to={{\n                                    pathname: '/search',\n                                    state: {\n                                        question: item.query,\n                                        searchType: item.type,\n                                        searchGroups: item.groups,\n                                        searchColumns: item.columns\n                                    }\n                                    }}>\n                                    <Button type=\"link\" icon={<DoubleRightOutlined />} />\n                                </Link>,\n                                <Button type=\"link\" icon={<DeleteOutlined />} onClick={async () => await deleteSavedItem()} value={idx} />\n                                ]}\n                            >\n                            <Meta\n                                avatar={<Avatar style={{backgroundColor: \"#eb4034\"}} icon={<CompassTwoTone twoToneColor='#eb4034' />} />}\n                                \n                                title={item.query}\n                                description={\n                                    <div>\n                                        {item.groups.map(item => (\n                                            <Tag color=\"blue\">{item}</Tag>\n                                        ))}\n                                        {item.columns.map(item => (\n                                            <Tag color=\"green\">{item}</Tag>\n                                        ))}\n                                        <br/>\n                                        <Tag color=\"red\">{item.type}</Tag>\n                                    </div>\n                                }\n                                />\n                            </Card>\n                            </Col>\n                            ))}\n                        </Row>\n                        :\n                            <Row gutter={[16, 24]}>\n                                <Col flex=\"auto\">\n                                    <Empty\n                                        description={\n                                        <span>\n                                            Saved searches appear here...\n                                        </span>\n                                        }\n                                    >\n                                    </Empty> \n                                </Col>\n                            </Row>\n                        }\n                    </Col>\n                </Row>\n            </div>\n        </div>\n    )\n\n}\n\nexport default OptionSelection;"]},"metadata":{},"sourceType":"module"}