{"ast":null,"code":"var _jsxFileName = \"/Users/akhand/Developer/power-search/quickstart-react/src/views/SearchView.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { Button, PageHeader, Input, Dropdown, Menu, Row, Col, Empty } from 'antd';\nimport { PlayCircleFilled, DownOutlined, SearchOutlined } from '@ant-design/icons';\nimport mondaySdk from \"monday-sdk-js\";\nconst monday = mondaySdk();\nconst {\n  Search\n} = Input;\n\nconst SearchView = () => {\n  const [dataLoading, setDataLoading] = useState(false);\n  const [resultsLoading, setResultsLoading] = useState(false);\n  const [boardGroups, setBoardGroups] = useState([]);\n  const [allData, setAllData] = useState({});\n  const [allResults, setAllResults] = useState({});\n  const [wiki, setWiki] = useState(\"\");\n  const [isMounted, setIsMounted] = useState(false);\n  const [boardId, setBoardId] = useState(\"\");\n  const backButton = useHistory();\n  const groupMenu = /*#__PURE__*/React.createElement(Menu, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 9\n    }\n  }, boardGroups.map(function (group, index) {\n    return /*#__PURE__*/React.createElement(Menu.Item, {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 17\n      }\n    }, group.title);\n  }));\n\n  function clickBackButton() {\n    backButton.push('/');\n  }\n\n  useEffect(() => {\n    // getBoardId()\n    monday.listen(\"context\", getContext);\n    setIsMounted(true);\n  }, []);\n  useEffect(() => {\n    if (isMounted) {\n      getBoardGroups(); // gets triggered whenever boardId changes\n      // get other stuff dependent on boardId too!\n    }\n  }, [boardId]);\n\n  async function getContext(res) {\n    setBoardId(res.data.boardIds[0]);\n  }\n\n  async function getBoardGroups() {\n    monday.api(`query { boards(ids: ${boardId}) { columns { id title } groups { id title }} } `).then(res => {\n      // setAllData(res.data)\n      console.log(res.data);\n      setBoardGroups(res.data.boards[0].groups);\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(PageHeader, {\n    className: \"site-page-header\",\n    onBack: clickBackButton,\n    title: \"Super Search\",\n    subTitle: \"Get answers from your boards!\" // extra={[\n    //     <Dropdown overlay={menu} trigger={['click']}>\n    //     <a className=\"ant-dropdown-link\" onClick={e => e.preventDefault()}>\n    //       Click me <DownOutlined />\n    //     </a>\n    //   </Dropdown>,\n    //     <Button type=\"secondary\" size=\"large\" icon={<PlayCircleFilled />}>\n    //         View Search History\n    //     </Button>,\n    // ]}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"site-statistic-demo-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    gutter: [16, 24],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    flex: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"Ask a question!\",\n    size: \"large\",\n    shape: \"round\",\n    suffix: /*#__PURE__*/React.createElement(SearchOutlined, {\n      className: \"site-form-item-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 29\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    span: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    size: \"large\",\n    shape: \"round\",\n    block: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 25\n    }\n  }, \"Search\"))), /*#__PURE__*/React.createElement(Row, {\n    gutter: [16, 24],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, boardId ? /*#__PURE__*/React.createElement(Col, {\n    flex: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Dropdown, {\n    overlay: menu,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"ant-dropdown-link\",\n    onClick: e => e.preventDefault(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 33\n    }\n  }, \"Select groups(s)\", /*#__PURE__*/React.createElement(DownOutlined, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 29\n    }\n  })))) : /*#__PURE__*/React.createElement(Col, {\n    flex: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 26\n    }\n  }, /*#__PURE__*/React.createElement(Empty, {\n    description: /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 28\n      }\n    }, \"Please select a board to continue...\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 26\n    }\n  })))));\n};\n\nexport default SearchView;","map":{"version":3,"sources":["/Users/akhand/Developer/power-search/quickstart-react/src/views/SearchView.js"],"names":["React","useState","useEffect","useHistory","useParams","Button","PageHeader","Input","Dropdown","Menu","Row","Col","Empty","PlayCircleFilled","DownOutlined","SearchOutlined","mondaySdk","monday","Search","SearchView","dataLoading","setDataLoading","resultsLoading","setResultsLoading","boardGroups","setBoardGroups","allData","setAllData","allResults","setAllResults","wiki","setWiki","isMounted","setIsMounted","boardId","setBoardId","backButton","groupMenu","map","group","index","title","clickBackButton","push","listen","getContext","getBoardGroups","res","data","boardIds","api","then","console","log","boards","groups","menu","e","preventDefault"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { Button, PageHeader, Input, Dropdown, Menu, Row, Col, Empty } from 'antd';\nimport { PlayCircleFilled, DownOutlined, SearchOutlined } from '@ant-design/icons'\nimport mondaySdk from \"monday-sdk-js\";\n\nconst monday = mondaySdk();\nconst { Search } = Input;\n\n\n\n\nconst SearchView = () => {\n\n    const [dataLoading, setDataLoading] = useState(false)\n    const [resultsLoading, setResultsLoading] = useState(false)\n    const [boardGroups, setBoardGroups] = useState([])\n    const [allData, setAllData] = useState({})\n    const [allResults, setAllResults] = useState({})\n    const [wiki, setWiki] = useState(\"\")\n    const [isMounted, setIsMounted] = useState(false)\n    const [boardId, setBoardId] = useState(\"\")\n    const backButton = useHistory()\n\n    const groupMenu = (\n        <Menu>\n            {boardGroups.map(function (group, index){\n                return (\n                <Menu.Item key={index}>{group.title}</Menu.Item>\n                )\n            })}\n        </Menu>\n    );  \n\n    function clickBackButton(){\n        backButton.push('/')\n    }\n\n    useEffect(() => {\n        // getBoardId()\n        monday.listen(\"context\", getContext);\n  \n        setIsMounted(true)\n    }, []);\n\n    useEffect(() => {\n        if(isMounted){\n            getBoardGroups() // gets triggered whenever boardId changes\n            // get other stuff dependent on boardId too!\n        }\n\n    }, [boardId])\n\n    async function getContext(res){\n        setBoardId(res.data.boardIds[0])\n    }\n\n    async function getBoardGroups(){\n        monday.api(`query { boards(ids: ${boardId}) { columns { id title } groups { id title }} } `)\n        .then((res) => {\n            // setAllData(res.data)\n            console.log(res.data)\n            setBoardGroups(res.data.boards[0].groups)\n        })\n    }\n\n    return (\n        <div className=\"container\">\n            <PageHeader\n                className=\"site-page-header\"\n                onBack={clickBackButton}\n                title=\"Super Search\"\n                subTitle=\"Get answers from your boards!\"\n                // extra={[\n                //     <Dropdown overlay={menu} trigger={['click']}>\n                //     <a className=\"ant-dropdown-link\" onClick={e => e.preventDefault()}>\n                //       Click me <DownOutlined />\n                //     </a>\n                //   </Dropdown>,\n                //     <Button type=\"secondary\" size=\"large\" icon={<PlayCircleFilled />}>\n                //         View Search History\n                //     </Button>,\n                // ]}\n            />\n            <div className=\"site-statistic-demo-card\">\n                <Row gutter={[16, 24]}>\n                    <Col flex=\"auto\">\n                    <Input\n                        placeholder=\"Ask a question!\"\n                        size=\"large\"\n                        shape=\"round\"\n                        suffix={\n                            <SearchOutlined className=\"site-form-item-icon\" />\n                        }\n                    />\n                    </Col>\n                    <Col span={4}>\n                        <Button type=\"primary\" size=\"large\" shape=\"round\" block>Search</Button>\n                    </Col>\n                </Row>\n                <Row gutter={[16, 24]}>\n                    {boardId ? \n                        <Col flex=\"auto\">\n                            <Dropdown overlay={menu}>\n                                <a className=\"ant-dropdown-link\" onClick={e => e.preventDefault()}>\n                                Select groups(s) \n                            <DownOutlined />\n                                </a>\n                            </Dropdown>\n                        </Col>\n\n\n                         :  \n                         <Col flex=\"auto\">\n                         <Empty\n                         description={\n                           <span>\n                             Please select a board to continue...\n                           </span>\n                         }\n                       >\n                       </Empty> \n                       </Col>\n                    }\n                </Row>\n            </div>\n        </div>\n    )\n\n}\n\nexport default SearchView;"]},"metadata":{},"sourceType":"module"}