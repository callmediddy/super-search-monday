{"ast":null,"code":"var _jsxFileName = \"/Users/akhand/Developer/power-search/quickstart-react/src/views/SearchView.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { Button, PageHeader, Input, Dropdown, Menu, Row, Col, Empty } from 'antd';\nimport { PlayCircleFilled, DownOutlined, SearchOutlined } from '@ant-design/icons';\nimport mondaySdk from \"monday-sdk-js\";\nconst monday = mondaySdk();\nconst {\n  Search\n} = Input;\n\nconst SearchView = () => {\n  const [dataLoading, setDataLoading] = useState(false);\n  const [resultsLoading, setResultsLoading] = useState(false);\n  const [boardGroups, setBoardGroups] = useState([]);\n  const [allData, setAllData] = useState({});\n  const [allResults, setAllResults] = useState({});\n  const [wiki, setWiki] = useState(\"\");\n  const [isMounted, setIsMounted] = useState(false);\n  const [boardId, setBoardId] = useState(\"\");\n  const backButton = useHistory();\n  const groupMenu =\n  /*#__PURE__*/\n  // <Menu>\n  //     {boardGroups.map(function (group, index){\n  //         return (\n  //         <Menu.Item key={index}>{group.title}</Menu.Item>\n  //         )\n  //     })}\n  // </Menu>\n  React.createElement(Select, {\n    mode: \"multiple\",\n    style: {\n      width: '100%'\n    },\n    placeholder: \"select one country\",\n    defaultValue: ['china'],\n    onChange: handleChange,\n    optionLabelProp: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 9\n    }\n  }, boardGroups.map(function (group, index) {\n    return /*#__PURE__*/React.createElement(Option, {\n      value: id,\n      label: title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"demo-option-label-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 21\n      }\n    }, title));\n  }));\n\n  function clickBackButton() {\n    backButton.push('/');\n  }\n\n  useEffect(() => {\n    // getBoardId()\n    monday.listen(\"context\", getContext);\n    setIsMounted(true);\n  }, []);\n  useEffect(() => {\n    if (isMounted) {\n      getBoardGroups(); // gets triggered whenever boardId changes\n      // get other stuff dependent on boardId too!\n    }\n  }, [boardId]);\n\n  async function getContext(res) {\n    setBoardId(res.data.boardIds[0]);\n  }\n\n  async function getBoardGroups() {\n    monday.api(`query { boards(ids: ${boardId}) { columns { id title } groups { id title }} } `).then(res => {\n      // setAllData(res.data)\n      console.log(res.data);\n      setBoardGroups(res.data.boards[0].groups);\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(PageHeader, {\n    className: \"site-page-header\",\n    onBack: clickBackButton,\n    title: \"Super Search\",\n    subTitle: \"Get answers from your boards!\" // extra={[\n    //     <Dropdown overlay={menu} trigger={['click']}>\n    //     <a className=\"ant-dropdown-link\" onClick={e => e.preventDefault()}>\n    //       Click me <DownOutlined />\n    //     </a>\n    //   </Dropdown>,\n    //     <Button type=\"secondary\" size=\"large\" icon={<PlayCircleFilled />}>\n    //         View Search History\n    //     </Button>,\n    // ]}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"site-statistic-demo-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    gutter: [16, 24],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    flex: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"Ask a question!\",\n    size: \"large\",\n    shape: \"round\",\n    suffix: /*#__PURE__*/React.createElement(SearchOutlined, {\n      className: \"site-form-item-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 29\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    span: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    size: \"large\",\n    shape: \"round\",\n    block: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 25\n    }\n  }, \"Search\"))), /*#__PURE__*/React.createElement(Row, {\n    gutter: [16, 24],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 17\n    }\n  }, boardId ? /*#__PURE__*/React.createElement(Col, {\n    flex: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 25\n    }\n  }, groupMenu) : /*#__PURE__*/React.createElement(Col, {\n    flex: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 26\n    }\n  }, /*#__PURE__*/React.createElement(Empty, {\n    description: /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 28\n      }\n    }, \"Please select a board to continue...\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 26\n    }\n  })))));\n};\n\nexport default SearchView;","map":{"version":3,"sources":["/Users/akhand/Developer/power-search/quickstart-react/src/views/SearchView.js"],"names":["React","useState","useEffect","useHistory","useParams","Button","PageHeader","Input","Dropdown","Menu","Row","Col","Empty","PlayCircleFilled","DownOutlined","SearchOutlined","mondaySdk","monday","Search","SearchView","dataLoading","setDataLoading","resultsLoading","setResultsLoading","boardGroups","setBoardGroups","allData","setAllData","allResults","setAllResults","wiki","setWiki","isMounted","setIsMounted","boardId","setBoardId","backButton","groupMenu","width","handleChange","map","group","index","id","title","clickBackButton","push","listen","getContext","getBoardGroups","res","data","boardIds","api","then","console","log","boards","groups"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { Button, PageHeader, Input, Dropdown, Menu, Row, Col, Empty } from 'antd';\nimport { PlayCircleFilled, DownOutlined, SearchOutlined } from '@ant-design/icons'\nimport mondaySdk from \"monday-sdk-js\";\n\nconst monday = mondaySdk();\nconst { Search } = Input;\n\n\n\n\nconst SearchView = () => {\n\n    const [dataLoading, setDataLoading] = useState(false)\n    const [resultsLoading, setResultsLoading] = useState(false)\n    const [boardGroups, setBoardGroups] = useState([])\n    const [allData, setAllData] = useState({})\n    const [allResults, setAllResults] = useState({})\n    const [wiki, setWiki] = useState(\"\")\n    const [isMounted, setIsMounted] = useState(false)\n    const [boardId, setBoardId] = useState(\"\")\n    const backButton = useHistory()\n\n    const groupMenu = (\n        // <Menu>\n        //     {boardGroups.map(function (group, index){\n        //         return (\n        //         <Menu.Item key={index}>{group.title}</Menu.Item>\n        //         )\n        //     })}\n        // </Menu>\n        <Select\n            mode=\"multiple\"\n            style={{ width: '100%' }}\n            placeholder=\"select one country\"\n            defaultValue={['china']}\n            onChange={handleChange}\n            optionLabelProp=\"label\"\n        >    \n        {boardGroups.map(function (group, index){\n            return (\n                <Option value={id} label={title}>\n                    <div className=\"demo-option-label-item\">\n                        {title}\n                    </div>\n                </Option>\n            )\n        })}\n        </Select>\n    );  \n\n    function clickBackButton(){\n        backButton.push('/')\n    }\n\n    useEffect(() => {\n        // getBoardId()\n        monday.listen(\"context\", getContext);\n  \n        setIsMounted(true)\n    }, []);\n\n    useEffect(() => {\n        if(isMounted){\n            getBoardGroups() // gets triggered whenever boardId changes\n            // get other stuff dependent on boardId too!\n        }\n\n    }, [boardId])\n\n    async function getContext(res){\n        setBoardId(res.data.boardIds[0])\n    }\n\n    async function getBoardGroups(){\n        monday.api(`query { boards(ids: ${boardId}) { columns { id title } groups { id title }} } `)\n        .then((res) => {\n            // setAllData(res.data)\n            console.log(res.data)\n            setBoardGroups(res.data.boards[0].groups)\n        })\n    }\n\n    return (\n        <div className=\"container\">\n            <PageHeader\n                className=\"site-page-header\"\n                onBack={clickBackButton}\n                title=\"Super Search\"\n                subTitle=\"Get answers from your boards!\"\n                // extra={[\n                //     <Dropdown overlay={menu} trigger={['click']}>\n                //     <a className=\"ant-dropdown-link\" onClick={e => e.preventDefault()}>\n                //       Click me <DownOutlined />\n                //     </a>\n                //   </Dropdown>,\n                //     <Button type=\"secondary\" size=\"large\" icon={<PlayCircleFilled />}>\n                //         View Search History\n                //     </Button>,\n                // ]}\n            />\n            <div className=\"site-statistic-demo-card\">\n                <Row gutter={[16, 24]}>\n                    <Col flex=\"auto\">\n                    <Input\n                        placeholder=\"Ask a question!\"\n                        size=\"large\"\n                        shape=\"round\"\n                        suffix={\n                            <SearchOutlined className=\"site-form-item-icon\" />\n                        }\n                    />\n                    </Col>\n                    <Col span={4}>\n                        <Button type=\"primary\" size=\"large\" shape=\"round\" block>Search</Button>\n                    </Col>\n                </Row>\n                <Row gutter={[16, 24]}>\n                    {boardId ? \n                        <Col flex=\"auto\">\n                            {groupMenu}\n                            {/* <Dropdown overlay={groupMenu}>\n                                <a className=\"ant-dropdown-link\" onClick={e => e.preventDefault()}>\n                                Select groups(s) \n                            <DownOutlined />\n                                </a>\n                            </Dropdown>\n                            <Select\n                                mode=\"multiple\"\n                                allowClear\n                                style={{ width: '100%' }}\n                                placeholder=\"Please select\"\n                                defaultValue={['a10', 'c12']}\n                                onChange={handleChange}\n                                >\n                                {children}\n                            </Select>\n                        // </Col> */}\n                            </Col>\n\n                         :  \n                         <Col flex=\"auto\">\n                         <Empty\n                         description={\n                           <span>\n                             Please select a board to continue...\n                           </span>\n                         }\n                       >\n                       </Empty> \n                       </Col>\n                    }\n                </Row>\n            </div>\n        </div>\n    )\n\n}\n\nexport default SearchView;"]},"metadata":{},"sourceType":"module"}