{"ast":null,"code":"import _regeneratorRuntime from\"/Users/akhand/Developer/power-search/quickstart-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/akhand/Developer/power-search/quickstart-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/akhand/Developer/power-search/quickstart-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useHistory,Link}from\"react-router-dom\";import{PageHeader,Row,Col,List,Divider,Spin}from'antd';import{LoadingOutlined}from'@ant-design/icons';import mondaySdk from\"monday-sdk-js\";var monday=mondaySdk();var HistoryView=function HistoryView(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),searchHistory=_useState2[0],setSearchHistory=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),dataLoading=_useState4[0],setDataLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isMounted=_useState6[0],setIsMounted=_useState6[1];var backButton=useHistory();var antIcon=/*#__PURE__*/React.createElement(LoadingOutlined,{style:{fontSize:56},spin:true});function clickBackButton(){backButton.push('/');}useEffect(function(){setDataLoading(true);loadSearchHistory();setDataLoading(false);if(!isMounted){setIsMounted(true);}},[searchHistory,isMounted]);function loadSearchHistory(){return _loadSearchHistory.apply(this,arguments);}function _loadSearchHistory(){_loadSearchHistory=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var resp,history;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return monday.storage.instance.getItem('mop');case 2:resp=_context.sent;if(!(!resp||!resp.data)){_context.next=7;break;}return _context.abrupt(\"return\");case 7:if(resp.data.value!==null){history=resp.data.value;setSearchHistory(JSON.parse(history));}case 8:case\"end\":return _context.stop();}}},_callee);}));return _loadSearchHistory.apply(this,arguments);}return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(PageHeader,{className:\"site-page-header\",onBack:clickBackButton,title:\"Super Search History\",subTitle:\"View your past searches, all stored securely on monday.com!\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"site-statistic-demo-card\"},dataLoading?/*#__PURE__*/React.createElement(Row,{justify:\"center\"},/*#__PURE__*/React.createElement(Spin,{indicator:antIcon})):/*#__PURE__*/React.createElement(Row,{gutter:16},/*#__PURE__*/React.createElement(Col,{flex:\"auto\"},/*#__PURE__*/React.createElement(Divider,{orientation:\"left\"},\"Past searches...\"),/*#__PURE__*/React.createElement(List//   header={<div>Header</div>}\n//   footer={<div>Footer</div>}\n,{bordered:true,dataSource:searchHistory,renderItem:function renderItem(item,idx){return/*#__PURE__*/React.createElement(Link,{to:{pathname:'/search',state:{question:item}}},/*#__PURE__*/React.createElement(List.Item,{key:idx},item));}})))));};export default HistoryView;","map":{"version":3,"sources":["/Users/akhand/Developer/power-search/quickstart-react/src/views/HistoryView.js"],"names":["React","useState","useEffect","useHistory","Link","PageHeader","Row","Col","List","Divider","Spin","LoadingOutlined","mondaySdk","monday","HistoryView","searchHistory","setSearchHistory","dataLoading","setDataLoading","isMounted","setIsMounted","backButton","antIcon","fontSize","clickBackButton","push","loadSearchHistory","storage","instance","getItem","resp","data","value","history","JSON","parse","item","idx","pathname","state","question"],"mappings":"igBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,UAAT,CAAqBC,IAArB,KAAiC,kBAAjC,CACA,OAAUC,UAAV,CAAsBC,GAAtB,CAA2BC,GAA3B,CAAgCC,IAAhC,CAAsCC,OAAtC,CAA+CC,IAA/C,KAA0D,MAA1D,CACA,OAASC,eAAT,KAAgC,mBAAhC,CAEA,MAAOC,CAAAA,SAAP,KAAsB,eAAtB,CAEA,GAAMC,CAAAA,MAAM,CAAGD,SAAS,EAAxB,CAIA,GAAME,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,eAEoBb,QAAQ,CAAC,EAAD,CAF5B,wCAEfc,aAFe,eAEAC,gBAFA,8BAGgBf,QAAQ,CAAC,IAAD,CAHxB,yCAGfgB,WAHe,eAGFC,cAHE,8BAIYjB,QAAQ,CAAC,KAAD,CAJpB,yCAIfkB,SAJe,eAIJC,YAJI,eAKtB,GAAMC,CAAAA,UAAU,CAAGlB,UAAU,EAA7B,CACA,GAAMmB,CAAAA,OAAO,cAAG,oBAAC,eAAD,EAAiB,KAAK,CAAE,CAAEC,QAAQ,CAAE,EAAZ,CAAxB,CAA0C,IAAI,KAA9C,EAAhB,CAEA,QAASC,CAAAA,eAAT,EAA0B,CACtBH,UAAU,CAACI,IAAX,CAAgB,GAAhB,EACH,CAEDvB,SAAS,CAAC,UAAK,CACXgB,cAAc,CAAC,IAAD,CAAd,CACAQ,iBAAiB,GACjBR,cAAc,CAAC,KAAD,CAAd,CACA,GAAG,CAACC,SAAJ,CAAc,CACVC,YAAY,CAAC,IAAD,CAAZ,CACH,CACJ,CAPQ,CAON,CAACL,aAAD,CAAgBI,SAAhB,CAPM,CAAT,CAZsB,QAsBPO,CAAAA,iBAtBO,6JAsBtB,0KACqBb,CAAAA,MAAM,CAACc,OAAP,CAAeC,QAAf,CAAwBC,OAAxB,CAAgC,KAAhC,CADrB,QACQC,IADR,oBAEO,CAACA,IAAD,EAAS,CAACA,IAAI,CAACC,IAFtB,kEAKQ,GAAGD,IAAI,CAACC,IAAL,CAAUC,KAAV,GAAoB,IAAvB,CAA4B,CACpBC,OADoB,CACVH,IAAI,CAACC,IAAL,CAAUC,KADA,CAExBhB,gBAAgB,CAACkB,IAAI,CAACC,KAAL,CAAWF,OAAX,CAAD,CAAhB,CACH,CART,sDAtBsB,oDAmCtB,mBACI,2BAAK,SAAS,CAAC,WAAf,eACI,oBAAC,UAAD,EACI,SAAS,CAAC,kBADd,CAEI,MAAM,CAAET,eAFZ,CAGI,KAAK,CAAC,sBAHV,CAII,QAAQ,CAAC,6DAJb,EADJ,cAOI,2BAAK,SAAS,CAAC,0BAAf,EAEIP,WAAW,cACX,oBAAC,GAAD,EAAK,OAAO,CAAC,QAAb,eACA,oBAAC,IAAD,EAAM,SAAS,CAAEK,OAAjB,EADA,CADW,cAMX,oBAAC,GAAD,EAAK,MAAM,CAAE,EAAb,eACI,oBAAC,GAAD,EAAK,IAAI,CAAC,MAAV,eACJ,oBAAC,OAAD,EAAS,WAAW,CAAC,MAArB,qBADI,cAEJ,oBAAC,IACD;AACA;AAFA,EAGE,QAAQ,KAHV,CAIE,UAAU,CAAEP,aAJd,CAKE,UAAU,CAAE,oBAACqB,IAAD,CAAOC,GAAP,qBACR,oBAAC,IAAD,EAAM,EAAE,CAAE,CACNC,QAAQ,CAAE,SADJ,CAENC,KAAK,CAAE,CACHC,QAAQ,CAAEJ,IADP,CAFD,CAAV,eAMM,oBAAC,IAAD,CAAM,IAAN,EAAW,GAAG,CAAEC,GAAhB,EACKD,IADL,CANN,CADQ,EALd,EAFI,CADJ,CARJ,CAPJ,CADJ,CA4CH,CA/ED,CAiFA,cAAetB,CAAAA,WAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useHistory, Link } from \"react-router-dom\";\nimport {  PageHeader, Row, Col, List, Divider, Spin} from 'antd';\nimport { LoadingOutlined } from '@ant-design/icons';\n\nimport mondaySdk from \"monday-sdk-js\";\n\nconst monday = mondaySdk();\n\n\n\nconst HistoryView = () => {\n\n    const [searchHistory, setSearchHistory] = useState([])\n    const [dataLoading, setDataLoading] = useState(true)\n    const [isMounted, setIsMounted] = useState(false)\n    const backButton = useHistory()\n    const antIcon = <LoadingOutlined style={{ fontSize: 56 }} spin />;\n\n    function clickBackButton(){\n        backButton.push('/')\n    }\n\n    useEffect(() =>{\n        setDataLoading(true)\n        loadSearchHistory()\n        setDataLoading(false)\n        if(!isMounted){\n            setIsMounted(true)\n        }\n    }, [searchHistory, isMounted])\n\n\n    async function loadSearchHistory() {\n        let resp = await monday.storage.instance.getItem('mop')\n        if(!resp || !resp.data){\n            return\n        } else {\n            if(resp.data.value !== null){\n                let history = resp.data.value;\n                setSearchHistory(JSON.parse(history))\n            }\n        }\n        //\n    }\n\n    return (\n        <div className=\"container\">\n            <PageHeader\n                className=\"site-page-header\"\n                onBack={clickBackButton}\n                title=\"Super Search History\"\n                subTitle=\"View your past searches, all stored securely on monday.com!\"\n            />\n            <div className=\"site-statistic-demo-card\">\n            {\n                dataLoading ?                 \n                <Row justify=\"center\">\n                <Spin indicator={antIcon} />\n            </Row>\n            :\n                    \n                <Row gutter={16}>\n                    <Col flex=\"auto\">\n                <Divider orientation=\"left\">Past searches...</Divider>\n                <List\n                //   header={<div>Header</div>}\n                //   footer={<div>Footer</div>}\n                  bordered\n                  dataSource={searchHistory}\n                  renderItem={(item, idx) => (\n                      <Link to={{\n                          pathname: '/search',\n                          state: {\n                              question: item\n                          }\n                      }}>\n                            <List.Item key={idx}>\n                                {item}\n                            </List.Item>\n                      </Link>\n\n                  )}\n                />\n                </Col>\n                </Row>\n            }\n            </div>\n        </div>\n    )\n}\n\nexport default HistoryView\n"]},"metadata":{},"sourceType":"module"}